{"version":3,"sources":["public/js/login.js"],"names":["loginForm","document","getElementById","loginUser","options","response","fetch","data","json","status","querySelector","innerHTML","msg","code","classList","localStorage","setItem","token","window","open","createOptions","method","headers","body","JSON","stringify","addEventListener","event","preventDefault","email","value","password"],"mappings":";AAAA,MAAMA,EAAYC,SAASC,eAAe,aAY1C,eAAeC,EAAUC,GACjBC,MAAAA,QAAiBC,MACrB,2CACAF,GAEIG,QAAaF,EAASG,OAEtBC,EAASR,SAASS,cAAc,iBACtCD,EAAOE,UAAYJ,EAAKK,IAEN,MAAdL,EAAKM,MACPJ,EAAOK,UAAY,gDACnBC,aAAaC,QAAQ,aAAcT,EAAKU,OACxCC,OAAOC,KAAK,cAAe,UAE3BV,EAAOK,UAAY,oCAKvB,SAASM,EAAcb,GAQdH,MAPS,CACdiB,OAAQ,OACRC,QAAS,CACS,eAAA,oBAElBC,KAAMC,KAAKC,UAAUlB,IApCzBP,EAAU0B,iBAAiB,SAAUC,IACnCA,EAAMC,iBAMNzB,EADqBiB,EADD,CAAES,MAHR5B,SAASS,cAAc,cAAcoB,MAGtBC,SAFZ9B,SAASS,cAAc,kBAAkBoB","file":"login.16d0a0ea.js","sourceRoot":"..\\src","sourcesContent":["const loginForm = document.getElementById(\"loginForm\");\r\n\r\nloginForm.addEventListener(\"submit\", event => {\r\n  event.preventDefault();\r\n  const email = document.querySelector(\"#user_mail\").value;\r\n  const password = document.querySelector(\"#user_password\").value;\r\n\r\n  const userDetails = { email, password };\r\n  const loginOptions = createOptions(userDetails);\r\n  loginUser(loginOptions);\r\n});\r\n\r\nasync function loginUser(options) {\r\n  const response = await fetch(\r\n    \"http://94.231.110.64:3000/api/user/login\",\r\n    options\r\n  );\r\n  const data = await response.json();\r\n\r\n  const status = document.querySelector(\"#login-status\");\r\n  status.innerHTML = data.msg;\r\n\r\n  if (data.code === 200) {\r\n    status.classList = \"teal lighten-2 text-box card-panel text-white\";\r\n    localStorage.setItem(\"auth-token\", data.token);\r\n    window.open(\"/index.html\", \"_self\");\r\n  } else {\r\n    status.classList = \"red lighten-2 text-box card-panel\";\r\n  }\r\n}\r\n\r\n//Managing post options\r\nfunction createOptions(data) {\r\n  const options = {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify(data)\r\n  };\r\n  return options;\r\n}\r\n"]}